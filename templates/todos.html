<!-- templates/todos.html -->
<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æˆ‘çš„ Todo åˆ—è¡¨</title>
    <link rel="stylesheet" href="/static/css/todos.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>æˆ‘çš„ Todo åˆ—è¡¨</h1>
            <div class="subtitle">ç‚¹å‡»å¾…åŠå†…å®¹ç›´æ¥ç¼–è¾‘ï¼ŒæŒ‰å›è½¦ä¿å­˜</div>
        </header>
        
        <div class="controls">
            <button class="add-todo-btn" id="addTodoBtn">
                <span class="add-icon">+</span>
                <span>æ–°å¢å¾…åŠ</span>
            </button>
            
            <div class="view-controls">
                <button class="view-btn active" id="showAllBtn" data-view="all">
                    <span class="view-icon">ğŸ“‹</span>
                    <span>æ˜¾ç¤ºå…¨éƒ¨</span>
                </button>
                <button class="view-btn" id="hideCompletedBtn" data-view="active">
                    <span class="view-icon">ğŸ‘ï¸</span>
                    <span>éšè—å·²å®Œæˆ</span>
                </button>
                <button class="view-btn" id="showOnlyCompletedBtn" data-view="completed">
                    <span class="view-icon">âœ…</span>
                    <span>åªçœ‹å®Œæˆ</span>
                </button>
            </div>
        </div>
        
        <div class="new-todo-input-container" id="newTodoInputContainer">
            <input 
                type="text" 
                class="new-todo-input" 
                id="newTodoInput"
                placeholder="è¾“å…¥å¾…åŠäº‹é¡¹å†…å®¹ï¼ŒæŒ‰å›è½¦é”®ä¿å­˜"
                maxlength="200"
            >
            <div class="input-hint">
                <span class="enter-icon">â†µ</span>
                <span>æŒ‰å›è½¦é”®ä¿å­˜ï¼ŒESC é”®å–æ¶ˆ</span>
            </div>
        </div>
        
        <!-- å·²å®Œæˆäº‹é¡¹åˆ†éš”çº¿ -->
        <div class="completed-separator" id="completedSeparator">
            <div class="separator-line"></div>
            <span class="separator-text">å·²å®Œæˆäº‹é¡¹</span>
        </div>
        
        <ul class="todo-list" id="todoList">
            {% for todo in todos %}
            <li class="todo-item {% if todo.completed %}completed{% endif %}" 
                data-id="{{ todo.id }}" 
                data-completed="{{ todo.completed }}">
                <input 
                    type="checkbox" 
                    class="todo-checkbox" 
                    id="todo-{{ todo.id }}"
                    {% if todo.completed %}checked{% endif %}
                >
                <div class="todo-content">
                    <div class="todo-text-container" data-id="{{ todo.id }}">
                        <span class="todo-text">{{ todo.text }}</span>
                        <div class="edit-hint">
                            <span class="enter-icon">â†µ</span>
                            <span>æŒ‰å›è½¦ä¿å­˜ï¼ŒESC å–æ¶ˆ</span>
                        </div>
                    </div>
                    <input 
                        type="text" 
                        class="todo-edit-input" 
                        id="edit-todo-{{ todo.id }}"
                        value="{{ todo.text }}"
                        maxlength="200"
                    >
                    <div class="todo-actions">
                        <button class="delete-btn" data-id="{{ todo.id }}">
                            <span class="btn-text">åˆ é™¤</span>
                            <span class="loading-spinner" style="display: none;"></span>
                        </button>
                    </div>
                </div>
            </li>
            {% endfor %}
        </ul>
        
        <div id="status-message" class="status-message"></div>
        <div id="loading" class="loading">å¤„ç†ä¸­...</div>
        
        <div class="footer">
            <p>å…± <span id="totalCount">{{ todos|length }}</span> ä¸ªå¾…åŠäº‹é¡¹</p>
            {% set completed_count = 0 %}
            {% for todo in todos %}
                {% if todo.completed %}
                    {% set completed_count = completed_count + 1 %}
                {% endif %}
            {% endfor %}
            <p>å·²å®Œæˆï¼š<span id="completedCount">{{ completed_count }}</span> ä¸ª</p>
            <p>æœªå®Œæˆï¼š<span id="activeCount">{{ todos|length - completed_count }}</span> ä¸ª</p>
        </div>
    </div>

    <script src="/static/js/todos.js"></script>
</body>
</html>
